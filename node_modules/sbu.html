<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" href="https://www.stonybrook.edu/commcms/_resources/favicon/apple-touch-icon-144x144-precomposed.png">
    <link rel="icon" href="https://www.stonybrook.edu/commcms/_resources/favicon/apple-touch-icon.png">
    <title>SBU Energy Dashboard</title>
    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.3.1/mapbox-gl.css" rel="stylesheet">
    <!-- PapaParse -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.1/papaparse.min.js"></script>
    <!-- noUiSlider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.css">
    <!-- Highcharts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <!-- Tableau -->
    <script src="https://tableau.stonybrook.edu/javascripts/api/tableau-2.2.2.min.js"></script>
    <!-- Montserrat font as Effra-alternative -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600,700&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- CSS -->
    <link href="style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <!-- Check if JavaScript is not enabled by the user -->
    <noscript>JavaScript must be enabled to view Stony Brook University's Energy Dashboard.</noscript>
    <!-- Main sidebar -->
    <div class="main-sidebar">
      <div class="main-sidebar-header">
        Stony Brook University
        <hr>
        Energy Dashboard
      </div>
      <div class="main-sidebar-body">
        <!-- Main sidebar - Dashboard description -->
        <div class="main-sidebar-blurb">
          The SBU Energy Dashboard shows how energy-intense buildings are on campus. <b>Click on a building to learn more about its energy usage.</b>
          <br><br>
          Want to learn about Energy Use Intensity (EUI)? <a class="main-sidebar-blurb-eui" onclick="getElementById('eui-sidebar').style.left = '0px'">Click here</a>.
        </div>
        <!-- Main sidebar - Filters -->
        <center>
          <div class="sidebar-filter">
            <!-- Zoom into a specific campus -->
            <div class="sidebar-zoom-header">Select Campus:</div>
            <div class="sidebar-zoom-buttons">
              <button type="button" class="button zoom" value="west" onclick="zoomIntoLocation(value);">West</button>
              <button type="button" class="button zoom" value="east" onclick="zoomIntoLocation(value);">East</button>
              <button type="button" class="button zoom" value="south" onclick="zoomIntoLocation(value);">South</button>
              <button type="button" class="button zoom" value="r&d" onclick="zoomIntoLocation(value);">R&D</button>
              <button type="button" class="button zoom" value="southampton" onclick="zoomIntoLocation(value);">Southampton</button>
            </div>
          </div>
          <div class="sidebar-filter">
            <div class="sidebar-filter-header">Filter by:</div>
            <!-- Filter by building type -->
            Building Type:
            <div class="sidebar-filter-buttons">
              <button type="button" class="button classroom" value="classroom" onclick="setLayerFilter(value);">
                <span class="fas fa-book"></span>
                Classroom
              </button>
              <button type="button" class="button lab" value="lab" onclick="setLayerFilter(value);">
                <span class="fas fa-flask"></span>
                Lab
              </button>
              <button type="button" class="button office" value="office" onclick="setLayerFilter(value);">
                <span class="fas fa-address-card"></span>
                Office
              </button>
              <button type="button" class="button residence" value="residence" onclick="setLayerFilter(value);">
                <span class="fas fa-home"></span>
                Residence
              </button>
              <button type="button" class="button healthcare" value="healthcare" onclick="setLayerFilter(value);">
                <span class="fas fa-hospital"></span>
                Healthcare
              </button>
              <button type="button" class="button other" value="other" onclick="setLayerFilter(value);">
                <span class="fas fa-user-friends"></span>
                Other
              </button>
            </div>
            <!-- Filter by value range -->
            <div class="sidebar-filter-slider-header">Energy Use Intensity (EUI):</div>
            <div class="sidebar-filter-slider"></div>
          </div>
          <div class="sidebar-filter">
            <!-- Switch between EUI and Total Energy Use -->
            <div class="sidebar-filter-header">Switch between:</div>
            <div class="sidebar-filter-switch">
              <input type="checkbox" id="switch" class="sidebar-filter-switch-checkbox" onclick="switchBetween();" checked>
              <label class="sidebar-filter-switch-outer" for="switch">
                <span class="sidebar-filter-switch-inner"></span>
                <span class="sidebar-filter-switch-toggle"></span>
              </label>
            </div>
          </div>
        </center>
        <!-- Main sidebar - List of top 3 buildings -->
        <div class="mini-building-list">
          <div id="mini-building-list-group" class="mini-building-list-group">
            <div class="building-list-row header">
              <div class="building-list-column1 header">Building</div>
              <div id="mini-building-list-column2-header" class="building-list-column2 header">
                Energy Use Intensity
                <span>(kBtu/ft<sup>2</sup>)</span>
              </div>
            </div>
          </div>
          <div id="mini-building-list-expand" class="mini-building-list-expand" onclick="openFullBuildingList();">
            Expand Building List
            <span class="fas fa-angle-down"></span>
          </div>
        </div>
      </div>
    </div>
    <!-- Full building list sidebar -->
    <div id="full-building-list-sidebar" class="full-building-list-sidebar">
      <div class="full-building-list-sidebar-header">
        Full Building List
        <span class="fas fa-times-circle" onclick="getElementById('full-building-list-sidebar').style.left = '-410px'"></span>
      </div>
      <div class="full-building-list-sidebar-body">
        <!-- Full building list sidebar - Filters -->
        <center>
          <div class="sidebar-filter full-building-list-sidebar-filter">
            <div class="sidebar-filter-header">Filter by:</div>
            <!-- Filter by building type -->
            Building Type:
            <div class="sidebar-filter-buttons">
              <button type="button" class="button classroom" value="classroom" onclick="setLayerFilter(value);">
                <span class="fas fa-book"></span>
                Classroom
              </button>
              <button type="button" class="button lab" value="lab" onclick="setLayerFilter(value);">
                <span class="fas fa-flask"></span>
                Lab
              </button>
              <button type="button" class="button office" value="office" onclick="setLayerFilter(value);">
                <span class="fas fa-address-card"></span>
                Office
              </button>
              <button type="button" class="button residence" value="residence" onclick="setLayerFilter(value);">
                <span class="fas fa-home"></span>
                Residence
              </button>
              <button type="button" class="button healthcare" value="healthcare" onclick="setLayerFilter(value);">
                <span class="fas fa-hospital"></span>
                Healthcare
              </button>
              <button type="button" class="button other" value="other" onclick="setLayerFilter(value);">
                <span class="fas fa-user-friends"></span>
                Other
              </button>
            </div>
            <!-- Filter by value range -->
            <div class="sidebar-filter-slider-header">Energy Use Intensity (EUI):</div>
            <div class="sidebar-filter-slider"></div>
          </div>
          <div class="sidebar-filter full-building-list-sidebar-filter">
            <!-- Switch between EUI and Total Energy Use -->
            <div class="sidebar-filter-header">Switch between:</div>
            <div class="sidebar-filter-switch">
              <input type="checkbox" id="switch" class="sidebar-filter-switch-checkbox" onclick="switchBetween();" checked>
              <label class="sidebar-filter-switch-outer" for="switch">
                <span class="sidebar-filter-switch-inner"></span>
                <span class="sidebar-filter-switch-toggle"></span>
              </label>
            </div>
          </div>
        </center>
        <!-- Full building list sidebar - List of buildings -->
        <div class="full-building-list">
          <div id="full-building-list-group" class="full-building-list-group">
            <div class="building-list-row header">
              <div class="building-list-column1 header">Building</div>
              <div id="full-building-list-column2-header" class="building-list-column2 header">
                Energy Use Intensity
                <span>(kBtu/ft<sup>2</sup>)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Building description sidebar -->
    <div id="building-description-sidebar" class="building-description-sidebar">
      <div id="building-description-sidebar-header" class="building-description-sidebar-header"></div>
      <div class="building-description-sidebar-body">
        <!-- Building description sidebar - EUI or Total Energy Use of the building -->
        <div id="building-description-sidebar-value1-header" class="building-description-sidebar-value1-header"></div>
        <!-- Building description sidebar - Building rankings chart -->
        <div id="chart" class="chart"></div>
        <!-- Building description sidebar - Chart tooltip -->
        <div id="chart-tooltip-div" class="chart-tooltip-div">
          <div class="chart-tooltip-tip-div">
            <div class="chart-tooltip-tip"></div>
          </div>
          <div id="chart-tooltip-content-div" class="chart-tooltip-content-div"></div>
        </div>
        <hr>
        <!-- Building description sidebar - Building description -->
        <div class="building-description-sidebar-value2-div">
          <div id="building-description-sidebar-value2-header" class="building-description-sidebar-value2-header"></div>
          <button id="building-description-sidebar-switch-view" class="building-description-sidebar-switch-view" onclick="switchView();">Switch to Usage View</button>
        </div>
        <hr>
        <div class="building-description-sidebar-information">
          <div class="building-description-sidebar-info-header">
            Year Constructed:
          </div>
          <div id="building-description-sidebar-year" class="building-description-sidebar-info"></div>
          <div class="building-description-sidebar-info-header">
            Square Footage:
          </div>
          <div id="building-description-sidebar-sqft" class="building-description-sidebar-info"></div>
          <div class="building-description-sidebar-info-header">
            Annual Energy Cost:
          </div>
          <div id="building-description-sidebar-cost" class="building-description-sidebar-info"></div>
          <div class="building-description-sidebar-info-header">
            Space Usage:
          </div>
          <div id="building-description-sidebar-type" class="building-description-sidebar-info"></div>
        </div>
        <hr>
        <!-- Building description sidebar - Energy data button -->
        <div id="building-description-sidebar-energy-button-div" class="building-description-sidebar-energy-button-div">
          <button id="building-description-sidebar-energy-button" type="button" class="button" onclick="showTableauDashboard();">
            View Energy Data
          </button>
        </div>
        <hr>
        <!-- Building description sidebar - Space usage description -->
        <div id="building-description-sidebar-space-description" class="building-description-sidebar-space-description"></div>
      </div>
    </div>
    <!-- EUI sidebar -->
    <div id="eui-sidebar" class="eui-sidebar">
      <div class="eui-sidebar-header">
        What is Energy Use Intensity?
        <span class="fas fa-times-circle" onclick="getElementById('eui-sidebar').style.left = '-410px'"></span>
      </div>
      <div class="eui-sidebar-body">
        <div class="eui-sidebar-body-question">What is Energy Use Intensity?</div>
        <div class="eui-sidebar-body-answer">Energy Use Intensity (EUI) is a key metric used to benchmark a buildings annual energy consumption. EUI is defined as the measurement of a building’s annual energy consumption relative to its gross square footage. It has been called “the miles per gallon rating of the building industry” and is used to compare the energy consumption of similar building types. EUI also provides the ability to compare the energy performance of different types of buildings and is shown on the map with the transparent circles.</div>
        <div class="eui-sidebar-body-question">How is EUI calculated?</div>
        <div class="eui-sidebar-body-answer">
          <div class="eui-formula">
            <div class="eui-formula-eui">Energy Use Intensity =</div>
            <div class="eui-formula-numerator">Annual Energy Use <span>(kBtu)</span></div>
            <div class="eui-formula-denominator">Building Gross Square Footage <span>(GSF)</span></div>
          </div>
        </div>
        <div class="eui-sidebar-body-question">What does it mean when a building's EUI is lower than another's?</div>
        <div class="eui-sidebar-body-answer">Buildings with a low EUI typically demonstrates good energy performance. A low EUI can also signify that the building is not energy intense, such as residence halls. On the other hand, laboratory buildings and hospitals are energy-intense because of their required ventilation and use of energy-intense equipment.</div>
      </div>
    </div>
    <!-- Search bar -->
    <div class="search-bar">
      <input id="search-bar-input" class="search-bar-input" type="text" placeholder="Building Search" onkeyup="searchResults();">
      <span class="fas fa-search"></span>
      <div id="search-bar-results" class="search-bar-results"></div>
    </div>
    <!-- SBU Logo -->
    <div class="logo">
      <a href="https://energy.stonybrook.edu/" target="_blank">
        <img src=/commcms/energy/_images/logo.png alt="Stony Brook University - Energy Management">
      </a>
    </div>
    <!-- Map -->
    <div id="map"></div>
    <!-- Map layer button -->
    <div class="map-layer-button" onclick="satelliteView();">
      <label id="map-layer-label" class="map-layer-label">Satellite</label>
      <div id="map-layer"></div>
    </div>
    <!-- Energy data dashboard -->
    <div id="energy-data-dashboard-div" class="energy-data-dashboard-div">
      <div id="energy-data-dashboard-header" class="energy-data-dashboard-header">
        <button type="button" class="button energy-data-dashboard-close-button" onclick="hideTableauDashboard();">
          <span class="fas fa-angle-left"></span> Back to Map
        </button>
        <div id="energy-data-dashboard-header-title"></div>
        <div class="energy-data-dashboard-subheaders">
          <div class="energy-data-dashboard-subheader">
            Space Usage:
            <div id="energy-data-dashboard-subheader-type" class="energy-data-dashboard-subheader-data"></div>
          </div>
          <div class="energy-data-dashboard-subheader">
            Energy Use Intensity (EUI):
            <div id="energy-data-dashboard-subheader-eui" class="energy-data-dashboard-subheader-data"></div>
          </div>
          <div class="energy-data-dashboard-subheader">
            Fiscal Year Annual Energy Usage:
            <div id="energy-data-dashboard-subheader-usage" class="energy-data-dashboard-subheader-data"></div>
          </div>
        </div>
      </div>
      <center>
        <div id="tableau-dashboard" class="tableau-dashboard">
        </div>
     </center>
    </div>
    <!-- Mobile -->
    <div class="mobile">
      <a href="https://energy.stonybrook.edu/" target="_blank">
        <img src=/commcms/energy/_images/logo.png alt="Stony Brook University - Energy Management">
      </a>
      <div class="mobile-header">Welcome to Stony Brook University's Energy Dashboard!</div>
      <div class="mobile-info">
        Our Energy Dashboard mobile site is <b>coming soon</b>!
        <br><br>
        If you'd like to visit our Energy Dashboard, <b>please use a tablet or desktop</b> to see our buildings' energy use.
      </div>
    </div>
    <!-- JavaScript -->
    <script src="script.js"></script>
  <!-- ouc:info uuid="9b89f433-99b2-4082-b595-4e9402a9f5c7"/ --></body>
</html>